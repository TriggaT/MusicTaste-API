# MusicTaste-API
This is the backend to MusicTaste, a web application for users to create, share, and review other user’s MusicTaste/playlist. The backend of the website makes use of Ruby on Rails as API to manage the database of models: users, playlists, songs, and reviews. I scaffolded each model in, which includes the controller, route, migration, and model for each. There is active record association with users having many playlists and reviews in turn they belong to a user, while the playlists also has many reviews in additions to songs and they belong to a playlist. The playlist also belongs to a user. There is seed data provided in the repo to help you get started and see the properties of each before testing the code. 

You will need to run bundle install, make sure gems ‘rack-cors’, ‘bcrypt’, ‘jwt’, ‘pg’ and 'dotenv-rails' are included in the gemfile with each being important to properly use the backend. Once you've ran bundle install, review the migration files to understand the schema and what attributes each model has. The user has a name and password; playlist have a name and description; songs have a title and artist; and, reviews have a rating and (review) text. If the schema makes sense to you, you can go ahead and run rails db:migrate to run the migration (rake db:migrate) and create the database. I used Postgres for the database, which is why you need to ensure you have gem ‘pg’ and Postgres installed on your computer. You should run "rake db:seed" to get the seed data loaded and test it out with "rails console" in the command line and/or create your own sample data. 

I used JWT( JSON Web Token) and bcypt to authenticate users from the frontend while creating a salted hash of their passwords. When creating and logging in users, their user data, is encoded into a token to be stored on the browser. The token is created by JWT.encode, which takes a payload (JSON of the user’s data) and a secret. The method is inside of the application controller and used in the user and auth controllers. My secret is stored in a .env file, which is why I also have the gem ‘dotenv-rails' to ensure that it can be read in the where necessary and not uploaded to Github. This same process is used to automatically log in users, but instead of encoding the token, the token is decoded to ensure everything matches up on the backend before logging in the user.

Since I used localhost:3000 for React frontend of the website, I changed the port in the config/puma file to “3001” to allow access to both. You can review the controllers for each model to make sure you understand how the r API is working and visit localhost:3000/“x”, with x being the model, to see if the right JSON is being returned. The controllers have actions that are needed for the frontend of the website to interact with the backend of the website, which is why you need to make sure that rack-cors is in gem file and downloaded. Please check the config/initializers/cors.rb is present and allow localhost:3000, the react front end,  to handle Cross-Origin Resource Sharing (CORS) needed in order to accept cross-origin AJAX requests from the frontend. I made use of two methods, instance_to_json and self.array_to_json, inside some of the models to better shape how the JSON data would return to the frontend. 

If everything is properly working on your computer, you can move to frontend of the website to see how MusicTaste operates when the frontend and backend are interacting. Here's the link to the frontend repo: https://github.com/TriggaT/musictaste
